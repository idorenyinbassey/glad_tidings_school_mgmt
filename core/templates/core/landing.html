{% extends 'core/base.html' %}
{% load static %}
{% block content %}
<!-- Hero Carousel -->
<div
  id="heroCarousel"
  class="carousel slide hero-carousel"
  data-bs-ride="carousel"
>
  <div class="carousel-indicators">
    <button
      type="button"
      data-bs-target="#heroCarousel"
      data-bs-slide-to="0"
      class="active"
      aria-current="true"
      aria-label="Slide 1"
    ></button>
    <button
      type="button"
      data-bs-target="#heroCarousel"
      data-bs-slide-to="1"
      aria-label="Slide 2"
    ></button>
    <button
      type="button"
      data-bs-target="#heroCarousel"
      data-bs-slide-to="2"
      aria-label="Slide 3"
    ></button>
  </div>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img
        src="{% static 'images/landing/hero_1.jpg' %}"
        class="d-block w-100 carousel-image"
        alt="College Building"
        style="height: 400px; object-fit: cover"
      />
      <div class="carousel-caption hero-caption">
        <h2 class="fs-3 fs-md-2">Welcome to Glad Tidings College</h2>
        <p class="d-none d-sm-block">
          Nurturing minds, building futures, and creating leaders of tomorrow.
        </p>
        <div class="mt-2 mt-md-3">
          <a
            href="{% url 'admission' %}"
            class="btn btn-primary btn-sm btn-md-lg mb-1 mb-md-0"
            >Apply Now</a
          >
          <a
            href="{% url 'about_us' %}"
            class="btn btn-outline-light btn-sm btn-md-lg"
            >Learn More</a
          >
        </div>
      </div>
    </div>
    <div class="carousel-item">
      <img
        src="{% static 'images/landing/hero_2.jpg' %}"
        class="d-block w-100 carousel-image"
        alt="Students in Classroom"
        style="height: 400px; object-fit: cover"
      />
      <div class="carousel-caption hero-caption">
        <h2 class="fs-3 fs-md-2">Academic Excellence</h2>
        <p class="d-none d-sm-block">
          Our dedicated teachers and modern facilities ensure high-quality
          education.
        </p>
        <div class="mt-2 mt-md-3">
          <a
            href="{% url 'academics' %}"
            class="btn btn-primary btn-sm btn-md-lg mb-1 mb-md-0"
            >Our Academics</a
          >
          <a
            href="{% url 'portal' %}"
            class="btn btn-outline-light btn-sm btn-md-lg"
            >Student Portal</a
          >
        </div>
      </div>
    </div>
    <div class="carousel-item">
      <img
        src="{% static 'images/landing/hero_3.jpg' %}"
        class="d-block w-100 carousel-image"
        alt="College Sports"
        style="height: 400px; object-fit: cover"
      />
      <div class="carousel-caption hero-caption">
        <h2 class="fs-3 fs-md-2">All-Round Development</h2>
        <p class="d-none d-sm-block">
          We focus on academic, physical, social, and emotional development.
        </p>
        <div class="mt-2 mt-md-3">
          <a
            href="{% url 'about_us' %}"
            class="btn btn-primary btn-sm btn-md-lg mb-1 mb-md-0"
            >Our Philosophy</a
          >
          <a
            href="{% url 'admission' %}"
            class="btn btn-outline-light btn-sm btn-md-lg"
            >Join Us</a
          >
        </div>
      </div>
    </div>
  </div>
  <button
    class="carousel-control-prev"
    type="button"
    data-bs-target="#heroCarousel"
    data-bs-slide="prev"
  >
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button
    class="carousel-control-next"
    type="button"
    data-bs-target="#heroCarousel"
    data-bs-slide="next"
  >
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

<!-- Quick Access Buttons for Mobile -->
<div class="d-md-none container-fluid bg-primary text-white py-3 sticky-top">
  <div class="row text-center">
    <div class="col-4">
      <a href="{% url 'admission' %}" class="text-white text-decoration-none">
        <i class="fas fa-user-plus fa-lg"></i>
        <div class="small">Apply</div>
      </a>
    </div>
    <div class="col-4">
      <a href="{% url 'portal' %}" class="text-white text-decoration-none">
        <i class="fas fa-sign-in-alt fa-lg"></i>
        <div class="small">Portal</div>
      </a>
    </div>
    <div class="col-4">
      <a href="tel:+2341234567890" class="text-white text-decoration-none">
        <i class="fas fa-phone fa-lg"></i>
        <div class="small">Call</div>
      </a>
    </div>
  </div>
</div>

<!-- Quick Info Section -->
<div class="container mt-4 mt-md-5">
  <div class="row">
    <div class="col-sm-12 col-md-4 mb-4">
      <div class="card h-100 shadow">
        <div class="card-body text-center">
          <i class="fas fa-graduation-cap fa-3x text-primary mb-3"></i>
          <h3 class="card-title fs-4">Academic Excellence</h3>
          <p class="card-text">
            Our curriculum is designed to challenge students and prepare them
            for future success.
          </p>
        </div>
        <div class="card-footer bg-transparent border-0 text-center">
          <a href="{% url 'academics' %}" class="btn btn-outline-primary"
            >Learn More</a
          >
        </div>
      </div>
    </div>
    <div class="col-sm-12 col-md-4 mb-4">
      <div class="card h-100 shadow">
        <div class="card-body text-center">
          <i class="fas fa-chalkboard-teacher fa-3x text-primary mb-3"></i>
          <h3 class="card-title fs-4">Expert Faculty</h3>
          <p class="card-text">
            Our dedicated teachers are passionate about education and student
            development.
          </p>
        </div>
        <div class="card-footer bg-transparent border-0 text-center">
          <a href="{% url 'about_us' %}" class="btn btn-outline-primary"
            >Meet Our Team</a
          >
        </div>
      </div>
    </div>
    <div class="col-sm-12 col-md-4 mb-4">
      <div class="card h-100 shadow">
        <div class="card-body text-center">
          <i class="fas fa-running fa-3x text-primary mb-3"></i>
          <h3 class="card-title fs-4">Extracurricular Activities</h3>
          <p class="card-text">
            We offer a wide range of activities to develop talents and
            interests.
          </p>
        </div>
        <div class="card-footer bg-transparent border-0 text-center">
          <a href="{% url 'academics' %}" class="btn btn-outline-primary"
            >Explore Activities</a
          >
        </div>
      </div>
    </div>
  </div>
</div>

<!-- News and Announcements Section -->
<div class="container mt-4 mt-md-5">
  <!-- Section header with dropdown for mobile view -->
  <div class="d-flex justify-content-between align-items-baseline mb-3">
    <h2 class="border-bottom pb-2 mb-0">Updates</h2>
    <div class="dropdown d-md-none">
      <button
        class="btn btn-sm btn-outline-primary dropdown-toggle"
        type="button"
        id="mobileUpdatesMenu"
        data-bs-toggle="dropdown"
        aria-expanded="false"
      >
        News
      </button>
      <ul
        class="dropdown-menu dropdown-menu-end"
        aria-labelledby="mobileUpdatesMenu"
      >
        <li><a class="dropdown-item" href="#news-section">News</a></li>
        <li><a class="dropdown-item" href="#events-section">Events</a></li>
      </ul>
    </div>
  </div>

  <!-- Content panels -->
  <div class="row">
    <div class="col-lg-8" id="news-section">
      <h3 class="fs-4 d-md-none mb-3">Latest News</h3>
      <h3 class="fs-4 d-none d-md-block mb-3 border-bottom pb-2">
        Latest News
      </h3>
      {% if latest_news %}
        {% for post in latest_news %}
        <div class="card mb-3 shadow-sm">
          <div class="card-body">
            <h5 class="card-title">{{ post.title }}</h5>
            <p class="card-text text-muted mb-2">
              <small>
                <i class="fas fa-calendar-alt me-2"></i>
                {{ post.published_at|date:"M d, Y" }}
              </small>
            </p>
            <p class="card-text">{{ post.summary|default:post.content|truncatechars:180 }}</p>
          </div>
        </div>
        {% endfor %}
      {% else %}
        <!-- Fallback static samples -->
        <div class="card mb-3 shadow-sm">
          <div class="card-body">
            <h5 class="card-title">School Wins National Science Competition</h5>
            <p class="card-text text-muted mb-2">
              <small><i class="fas fa-calendar-alt me-2"></i>June 15, {% now "Y" %}</small>
            </p>
            <p class="card-text">Our students achieved first place in the National Science Competition, showcasing their innovative research and experiments.</p>
          </div>
        </div>
        <div class="card mb-3 shadow-sm">
          <div class="card-body">
            <h5 class="card-title">New Sports Facilities Opening</h5>
            <p class="card-text text-muted mb-2">
              <small><i class="fas fa-calendar-alt me-2"></i>May 28, {% now "Y" %}</small>
            </p>
            <p class="card-text">We're excited to announce the opening of our new state-of-the-art sports facilities, including a swimming pool and basketball court.</p>
          </div>
        </div>
      {% endif %}
      <div class="d-md-none d-flex justify-content-center mb-4">
        <a href="{% url 'news_list' %}" class="btn btn-primary">View All News</a>
      </div>
      <div class="d-none d-md-flex justify-content-start mb-4">
        <a href="{% url 'news_list' %}" class="btn btn-outline-primary">View All News</a>
      </div>
    </div>
    <div class="col-lg-4" id="events-section">
      <h3 class="fs-4 d-md-none mb-3 mt-3">Upcoming Events</h3>
      <h3 class="fs-4 d-none d-md-block mb-3 border-bottom pb-2">
        Upcoming Events
      </h3>
      <div class="list-group shadow-sm mb-3">
        {% if upcoming_events %}
          {% for ev in upcoming_events %}
          <div class="list-group-item">
            <div class="d-flex w-100 justify-content-between">
              <h5 class="mb-1 fs-5">{{ ev.title }}</h5>
              <small class="text-muted">
                {% if ev.start_time and ev.end_time %}
                  {{ ev.start_time|date:"M d" }} – {{ ev.end_time|date:"M d" }}
                {% elif ev.start_time %}
                  {{ ev.start_time|date:"M d" }}
                {% endif %}
              </small>
            </div>
            {% if ev.start_time %}
            <small class="text-muted"><i class="fas fa-calendar-day me-1"></i>
              {% if ev.end_time and ev.end_time != ev.start_time %}
                {{ ev.start_time|date:"M d, Y" }} – {{ ev.end_time|date:"M d, Y" }}
              {% else %}
                {{ ev.start_time|date:"M d, Y" }}
              {% endif %}
            </small>
            {% endif %}
          </div>
          {% endfor %}
        {% else %}
          <a href="#" class="list-group-item list-group-item-action">
            <div class="d-flex w-100 justify-content-between">
              <h5 class="mb-1 fs-5">Parent-Teacher Conference</h5>
              <small class="text-muted">Jul 20</small>
            </div>
            <small class="text-muted"><i class="fas fa-clock me-1"></i> 9:00 AM - 3:00 PM</small>
          </a>
          <a href="#" class="list-group-item list-group-item-action">
            <div class="d-flex w-100 justify-content-between">
              <h5 class="mb-1 fs-5">Annual Sports Day</h5>
              <small class="text-muted">Aug 5</small>
            </div>
            <small class="text-muted"><i class="fas fa-clock me-1"></i> 8:00 AM - 4:00 PM</small>
          </a>
        {% endif %}
      </div>
      <div class="text-center">
  <a href="{% url 'events_list' %}" class="btn btn-primary">View All Events</a>
      </div>
    </div>
  </div>
</div>

<!-- App Download Banner (Mobile Focus) -->
<div class="container-fluid bg-primary text-white py-4 my-5 d-md-none">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-3 text-center">
        <i class="fas fa-mobile-alt fa-3x"></i>
      </div>
      <div class="col-9">
        <h3 class="fs-5 mb-1">Get the Glad Tidings App</h3>
        <p class="small mb-2">Access portal features on the go!</p>
        <div>
          <a href="#" class="btn btn-sm btn-light">Download Now</a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Call to Action Section -->
<div class="container-fluid bg-light py-4 py-md-5 mt-4 mt-md-5">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-8">
        <h2 class="fs-3 fs-md-2">Ready to join our College community?</h2>
        <p class="lead">
          Apply now for admission to Glad Tidings College and start your journey
          to academic excellence.
        </p>
      </div>
      <div class="col-lg-4 text-center text-lg-end mt-3 mt-lg-0">
        <a
          href="{% url 'admission' %}"
          class="btn btn-primary btn-lg mb-2 mb-sm-0 me-sm-2 w-100 w-sm-auto"
          >Apply Today</a
        >
        <a
          href="{% url 'portal' %}"
          class="btn btn-outline-secondary btn-lg w-100 w-sm-auto"
          >Login to Portal</a
        >
      </div>
    </div>
  </div>
</div>

<!-- Virtual Tour Banner (Desktop Only) -->
<div class="container my-5 d-none d-md-block">
  <div class="card border-0 shadow">
    <div class="row g-0">
      <div class="col-md-6">
        <img
          src="{% static 'images/landing/tour_banner.jpg' %}"
          class="img-fluid rounded-start h-100 object-fit-cover"
          alt="College Campus"
          style="min-height: 300px"
        />
      </div>
      <div class="col-md-6">
        <div class="card-body h-100 d-flex flex-column justify-content-center">
          <h3 class="card-title">Take a Virtual Tour</h3>
          <p class="card-text">
            Explore our campus facilities from anywhere. Get a feel for our
            learning environment before you visit.
          </p>
          <a href="#" class="btn btn-outline-primary mt-auto align-self-start"
            >Start Virtual Tour</a
          >
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
